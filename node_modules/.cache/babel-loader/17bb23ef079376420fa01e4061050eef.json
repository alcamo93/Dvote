{"remainingRequest":"/home/alcamo/Ðvote/node_modules/babel-loader/lib/index.js!/home/alcamo/Ðvote/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/alcamo/Ðvote/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alcamo/Ðvote/src/components/HelloWorld.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alcamo/Ðvote/src/components/HelloWorld.vue","mtime":1597883897089},{"path":"/home/alcamo/Ðvote/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alcamo/Ðvote/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/alcamo/Ðvote/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alcamo/Ðvote/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/alcamo/\\xD0vote/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport web3 from \"../../contracts/web3\";\nimport instance from \"../../contracts/contractInstance\";\nimport Election from '../../build/contracts/Election.json';\nexport default {\n  data: function data() {\n    return {\n      selectedCandidate: null,\n      name: null,\n      currentAddress: null,\n      electionContract: Election,\n      tableData: [],\n      columns: [{\n        field: \"id\",\n        label: \"ID\",\n        width: \"40\",\n        numeric: true\n      }, {\n        field: \"name\",\n        label: \"Nombre\"\n      }, {\n        field: \"votes\",\n        label: \"Votos\"\n      }]\n    };\n  },\n  methods: {\n    getValue: function () {\n      var _getValue = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var electionContract, candidatesCount, i, candidates;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                web3 = new Web3(web3.currentProvider.selectedAddress);\n                this.votanteAddress = web3.currentProvider;\n                electionContract = instance;\n                this.currentAddress = electionContract._address;\n                _context.next = 6;\n                return electionContract.methods.candidatesCount().call();\n\n              case 6:\n                candidatesCount = _context.sent;\n                this.tableData = [];\n                i = 0;\n\n              case 9:\n                if (!(i < candidatesCount)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                if (!(i != 0)) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 13;\n                return electionContract.methods.candidates(i).call();\n\n              case 13:\n                candidates = _context.sent;\n                this.tableData.push({\n                  id: i,\n                  name: candidates.name,\n                  votes: candidates.voteCount\n                });\n\n              case 15:\n                i++;\n                _context.next = 9;\n                break;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getValue() {\n        return _getValue.apply(this, arguments);\n      }\n\n      return getValue;\n    }(),\n    setVote: function () {\n      var _setVote = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var electionContract, vote;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                web3 = new Web3(web3.currentProvider.selectedAddress);\n                this.votanteAddress = web3.currentProvider;\n                electionContract = instance;\n                _context2.next = 5;\n                return electionContract.methods.vote(this.selectedCandidate).send({\n                  from: this.votanteAddress\n                });\n\n              case 5:\n                vote = _context2.sent;\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setVote() {\n        return _setVote.apply(this, arguments);\n      }\n\n      return setVote;\n    }()\n  },\n  created: function created() {\n    this.getValue();\n  }\n};",{"version":3,"sources":["HelloWorld.vue"],"names":[],"mappings":";;;;;;AAkBA,OAAA,IAAA,MAAA,sBAAA;AACA,OAAA,QAAA,MAAA,kCAAA;AACA,OAAA,QAAA,MAAA,qCAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,iBAAA,EAAA,IADA;AAEA,MAAA,IAAA,EAAA,IAFA;AAGA,MAAA,cAAA,EAAA,IAHA;AAIA,MAAA,gBAAA,EAAA,QAJA;AAKA,MAAA,SAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,IAFA;AAGA,QAAA,KAAA,EAAA,IAHA;AAIA,QAAA,OAAA,EAAA;AAJA,OADA,EAOA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAPA,EAWA;AACA,QAAA,KAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAXA;AANA,KAAA;AAuBA,GAzBA;AA2BA,EAAA,OAAA,EAAA;AAEA,IAAA,QAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,gBAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,eAAA,CAAA,eAAA,CAAA;AACA,qBAAA,cAAA,GAAA,IAAA,CAAA,eAAA;AACA,gBAAA,gBALA,GAKA,QALA;AAMA,qBAAA,cAAA,GAAA,gBAAA,CAAA,QAAA;AANA;AAAA,uBAOA,gBAAA,CAAA,OAAA,CAAA,eAAA,GAAA,IAAA,EAPA;;AAAA;AAOA,gBAAA,eAPA;AAQA,qBAAA,SAAA,GAAA,EAAA;AACA,gBAAA,CATA,GASA,CATA;;AAAA;AAAA,sBASA,CAAA,GAAA,eATA;AAAA;AAAA;AAAA;;AAAA,sBAUA,CAAA,IAAA,CAVA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAYA,gBAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA,EAAA,IAAA,EAZA;;AAAA;AAYA,gBAAA,UAZA;AAaA,qBAAA,SAAA,CAAA,IAAA,CAAA;AAAA,kBAAA,EAAA,EAAA,CAAA;AAAA,kBAAA,IAAA,EAAA,UAAA,CAAA,IAAA;AAAA,kBAAA,KAAA,EAAA,UAAA,CAAA;AAAA,iBAAA;;AAbA;AASA,gBAAA,CAAA,EATA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAkBA,IAAA,OAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,gBAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,eAAA,CAAA,eAAA,CAAA;AACA,qBAAA,cAAA,GAAA,IAAA,CAAA,eAAA;AACA,gBAAA,gBArBA,GAqBA,QArBA;AAAA;AAAA,uBAsBA,gBAAA,CAAA,OAAA,CAAA,IAAA,CAAA,KAAA,iBAAA,EAAA,IAAA,CAAA;AAAA,kBAAA,IAAA,EAAA,KAAA;AAAA,iBAAA,CAtBA;;AAAA;AAsBA,gBAAA,IAtBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,GA3BA;AAsDA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,QAAA;AACA;AAxDA,CAAA","sourcesContent":["<template>\n  <div class=\"helloworld\">\n    <b-table :data=\"tableData\" :columns=\"columns\"></b-table>\n    <b-select v-model=\"selectedCandidate\" expanded placeholder=\"Select candidate\">\n      <option v-for=\"option in tableData\" :value=\"option.id\" :key=\"option.name\">{{ option.name }}</option>\n    </b-select>\n    <br>\n    <button class=\"button is-primary\" @click=\"setVote()\">Votar</button>\n    <br>\n    <br>\n    <h1>Dirección Contrato: {{this.currentAddress}}</h1>\n    <h1>Dirección  Votante: {{votanteAddress}}</h1>\n    <img src=\"../../public/img/Fintech.jpg\" aling=\"left\" style=\"left:20px;max-width:50%;width:100px;height:100px;\">\n    <img src=\"../../public/img/escuela 54x54.png\" aling=\"right\" style=\"left:20px;max-width:50%;width:100px;height:100px;\">\n  </div>\n</template>\n\n<script lang=\"js\">\nimport web3 from \"../../contracts/web3\"\nimport instance from \"../../contracts/contractInstance\"; \nimport Election from '../../build/contracts/Election.json'\n\nexport default {\n  data() {\n    return {\n      selectedCandidate: null,\n      name: null,\n      currentAddress: null,\n      electionContract: Election,\n      tableData: [],\n      columns: [\n        {\n          field: \"id\",\n          label: \"ID\",\n          width: \"40\",\n          numeric: true\n        },\n        {\n          field: \"name\",\n          label: \"Nombre\"\n        },\n        {\n          field: \"votes\",\n          label: \"Votos\"\n        }\n      ]\n    };\n  },\n\n  methods:{\n\n      async getValue(){\n          web3 = new Web3(web3.currentProvider.selectedAddress)\n          this.votanteAddress = web3.currentProvider\n          let electionContract = instance\n          this.currentAddress = electionContract._address\n          let candidatesCount = await electionContract.methods.candidatesCount().call()\n          this.tableData = []\n          for(let i = 0; i < candidatesCount; i++){\n              if(i != 0)\n              {\n                  let candidates = await electionContract.methods.candidates(i).call()\n                  this.tableData.push({ id: i, name: candidates.name, votes: candidates.voteCount})\n              }\n          }\n        \n      },\n      async setVote(){\n          web3 = new Web3(web3.currentProvider.selectedAddress)\n          this.votanteAddress = web3.currentProvider\n          let electionContract = instance\n          let vote = await electionContract.methods.vote(this.selectedCandidate).send({from: this.votanteAddress})\n          //console.log(vote)\n      }\n  },\n\n  created: function(){\n      this.getValue()\n  }\n};\n</script>\n\n<style scoped>\n.helloworld {\n  margin: auto;\n  width: 50%;\n}\n</style>"],"sourceRoot":"src/components"}]}