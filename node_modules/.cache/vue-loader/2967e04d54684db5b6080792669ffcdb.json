{"remainingRequest":"/home/alcamo/Dvote/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alcamo/Dvote/src/components/HelloWorld.vue?vue&type=style&index=0&id=469af010&scoped=true&lang=css&","dependencies":[{"path":"/home/alcamo/Dvote/src/components/HelloWorld.vue","mtime":1597883897089},{"path":"/home/alcamo/Dvote/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/alcamo/Dvote/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/alcamo/Dvote/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/alcamo/Dvote/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alcamo/Dvote/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.helloworld {\n  margin: auto;\n  width: 50%;\n}\n",{"version":3,"sources":["HelloWorld.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA","file":"HelloWorld.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"helloworld\">\n    <b-table :data=\"tableData\" :columns=\"columns\"></b-table>\n    <b-select v-model=\"selectedCandidate\" expanded placeholder=\"Select candidate\">\n      <option v-for=\"option in tableData\" :value=\"option.id\" :key=\"option.name\">{{ option.name }}</option>\n    </b-select>\n    <br>\n    <button class=\"button is-primary\" @click=\"setVote()\">Votar</button>\n    <br>\n    <br>\n    <h1>Dirección Contrato: {{this.currentAddress}}</h1>\n    <h1>Dirección  Votante: {{votanteAddress}}</h1>\n    <img src=\"../../public/img/Fintech.jpg\" aling=\"left\" style=\"left:20px;max-width:50%;width:100px;height:100px;\">\n    <img src=\"../../public/img/escuela 54x54.png\" aling=\"right\" style=\"left:20px;max-width:50%;width:100px;height:100px;\">\n  </div>\n</template>\n\n<script lang=\"js\">\nimport web3 from \"../../contracts/web3\"\nimport instance from \"../../contracts/contractInstance\"; \nimport Election from '../../build/contracts/Election.json'\n\nexport default {\n  data() {\n    return {\n      selectedCandidate: null,\n      name: null,\n      currentAddress: null,\n      electionContract: Election,\n      tableData: [],\n      columns: [\n        {\n          field: \"id\",\n          label: \"ID\",\n          width: \"40\",\n          numeric: true\n        },\n        {\n          field: \"name\",\n          label: \"Nombre\"\n        },\n        {\n          field: \"votes\",\n          label: \"Votos\"\n        }\n      ]\n    };\n  },\n\n  methods:{\n\n      async getValue(){\n          web3 = new Web3(web3.currentProvider.selectedAddress)\n          this.votanteAddress = web3.currentProvider\n          let electionContract = instance\n          this.currentAddress = electionContract._address\n          let candidatesCount = await electionContract.methods.candidatesCount().call()\n          this.tableData = []\n          for(let i = 0; i < candidatesCount; i++){\n              if(i != 0)\n              {\n                  let candidates = await electionContract.methods.candidates(i).call()\n                  this.tableData.push({ id: i, name: candidates.name, votes: candidates.voteCount})\n              }\n          }\n        \n      },\n      async setVote(){\n          web3 = new Web3(web3.currentProvider.selectedAddress)\n          this.votanteAddress = web3.currentProvider\n          let electionContract = instance\n          let vote = await electionContract.methods.vote(this.selectedCandidate).send({from: this.votanteAddress})\n          //console.log(vote)\n      }\n  },\n\n  created: function(){\n      this.getValue()\n  }\n};\n</script>\n\n<style scoped>\n.helloworld {\n  margin: auto;\n  width: 50%;\n}\n</style>"]}]}